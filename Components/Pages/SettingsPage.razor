@page "/settings"

<h3>Settings â€” @Settings.ConfigName</h3>

<RadzenStack Gap="1rem" Style="max-width: 600px;">

    <RadzenFieldset Text="Paths">
        <RadzenStack Gap="0.5rem">
            <RadzenLabel Text="Indexer Path" />
            <RadzenTextBox @bind-Value="Settings.IndexerPath" Style="width: 100%;" />

            <RadzenLabel Text="Work Path (local)" />
            <RadzenTextBox Value="@Settings.WorkPath" Style="width: 100%;" Disabled="true" />

            <RadzenLabel Text="Database Path (roaming)" />
            <RadzenTextBox Value="@Settings.DatabasePath" Style="width: 100%;" Disabled="true" />
        </RadzenStack>
    </RadzenFieldset>

    <RadzenFieldset Text="Encoding">
        <RadzenStack Gap="0.5rem">
            <RadzenLabel Text="Quality Level (CRF/CQ)" />
            <RadzenNumeric @bind-Value="Settings.QualityLevel" TValue="int" Min="0" Max="51" Style="width: 200px;" />

            <RadzenLabel Text="Force CPU encoding" />
            <RadzenCheckBox @bind-Value="Settings.ForceCpu" TValue="bool" />

            <RadzenLabel Text="Encoding Threshold (quality ratio)" />
            <RadzenNumeric @bind-Value="Settings.EncodingThreshold" TValue="double" Step="10" Style="width: 200px;" />
        </RadzenStack>
    </RadzenFieldset>

    <RadzenFieldset Text="File Filters">
        <RadzenStack Gap="0.5rem">
            <RadzenLabel Text="Minimum File Size (MB)" />
            <RadzenNumeric @bind-Value="Settings.MinFileSizeMB" TValue="int" Min="0" Style="width: 200px;" />

            <RadzenLabel Text="Min File Size Mb (re-encode)" />
            <RadzenNumeric @bind-Value="Settings.MinFileSizeMb" TValue="double" Min="0" Step="10" Style="width: 200px;" />

            <RadzenLabel Text="Min File Age (hours)" />
            <RadzenNumeric @bind-Value="Settings.MinFileAgeH" TValue="double" Min="0" Step="1" Style="width: 200px;" />

            <RadzenLabel Text="Video Extensions (comma-separated)" />
            <RadzenTextBox Value="@string.Join(", ", Settings.VideoExtensions)" Change="OnExtensionsChanged" Style="width: 100%;" />

            <RadzenLabel Text="Ignore Folders (comma-separated)" />
            <RadzenTextBox Value="@string.Join(", ", Settings.IgnoreFolders)" Change="OnIgnoreFoldersChanged" Style="width: 100%;" />
        </RadzenStack>
    </RadzenFieldset>

    <RadzenStack Orientation="Orientation.Horizontal" Gap="0.5rem">
        <RadzenButton Text="Save" Icon="save" ButtonStyle="ButtonStyle.Primary" Click="Save" />
        <RadzenBadge Text="@_statusMessage" BadgeStyle="@_statusStyle" Visible="@(!string.IsNullOrEmpty(_statusMessage))" />
    </RadzenStack>
</RadzenStack>
